"use strict";(self.webpackChunkconnections=self.webpackChunkconnections||[]).push([[180],{2180:(pt,$,o)=>{o.r($),o.d($,{AuthModule:()=>mt});var p=o(6814),h=o(5959),b=o(5237),t=o(5879),a=o(6223),e=o(4221);const S=(0,e.PH)("[Auth] Sign Up",(0,e.Ky)()),Z=(0,e.PH)("[Auth] Sign Up Success"),E=(0,e.PH)("[Auth] Sign Up Failure",(0,e.Ky)()),C=(0,e.PH)("[Auth] Sign Up Reset");var f=o(3371);const v=(0,e.ZF)(f.A.SignUp),w=(0,e.P1)(v,n=>n.isSubmitting),Q=(0,e.P1)(v,n=>n.validationsError);(0,e.P1)(v,n=>n.email);var I=o(5619);let k=(()=>{class n{constructor(r,i){this.fb=r,this.store=i,this.isSubmitting$=this.store.pipe((0,e.Ys)(w)),this.backendError$=this.store.pipe((0,e.Ys)(Q)),this.isSubmitFormButtonDisable$=new I.X(!1),this.subscriptions=[],this.registrationForm=this.fb.group({name:["",[a.kI.required,a.kI.maxLength(40),a.kI.pattern(/^[a-zA-Z\s]+$/)]],email:["",[a.kI.required,a.kI.email]],password:["",[a.kI.required,a.kI.minLength(8),a.kI.pattern(/^(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+])[A-Za-z\d!@#$%^&*()_+]+$/)]]})}resetSignUp(){this.registrationForm.reset(),this.store.dispatch(C())}initFormValueChanges(){const r=this.registrationForm.valueChanges.subscribe(()=>{this.isSubmitFormButtonDisable$.next(!1)});this.subscriptions.push(r)}onSubmit(){this.store.dispatch(S({userData:this.registrationForm.value}));const i=this.backendError$.subscribe(s=>{"PrimaryDuplicationException"===s?.type&&this.isSubmitFormButtonDisable$.next(!0)});this.subscriptions.push(i)}static#t=this.\u0275fac=function(i){return new(i||n)(t.LFG(a.qu),t.LFG(e.yh))};static#n=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac})}return n})();var P=o(6941),L=o(2490);function _(n,c){if(1&n&&(t.TgZ(0,"div",8),t._uU(1),t.ALo(2,"async"),t.qZA()),2&n){const r=t.oxw();let i;t.xp6(1),t.hij(" ",null==(i=t.lcZ(2,1,r.backendError$))?null:i.message," ")}}let H=(()=>{class n{constructor(r){this.signUpService=r,this.isSubmitting$=this.signUpService.isSubmitting$,this.backendError$=this.signUpService.backendError$,this.isSubmitFormButtonDisable$=this.signUpService.isSubmitFormButtonDisable$}ngOnInit(){this.signUpService.resetSignUp(),this.signUpService.initFormValueChanges()}ngOnDestroy(){this.signUpService.subscriptions.forEach(r=>r.unsubscribe())}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(k))};static#n=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-registartion-form"]],decls:16,vars:24,consts:[[1,"form",3,"formGroup","ngSubmit"],["label","FirstName","controlName","name",3,"control","isRequired","backendError"],["label","Email","controlName","email","type","email",3,"control","isRequired","backendError"],["label","Password","controlName","password","type","password",3,"control","isRequired","backendError"],["class","error",4,"ngIf"],[1,"btn__container"],["type","submit","customClass","auth__btn","title","submit",3,"disabled"],["routerLink","/auth/signin"],[1,"error"]],template:function(i,s){1&i&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return s.signUpService.onSubmit()}),t._UZ(1,"app-form-control",1),t.ALo(2,"async"),t._UZ(3,"app-form-control",2),t.ALo(4,"async"),t._UZ(5,"app-form-control",3),t.ALo(6,"async"),t.YNc(7,_,3,3,"div",4),t.ALo(8,"async"),t.TgZ(9,"div",5)(10,"app-button",6),t.ALo(11,"async"),t.ALo(12,"async"),t._uU(13," Sign up "),t.qZA(),t.TgZ(14,"a",7),t._uU(15," Have an account? Log In "),t.qZA()()()),2&i&&(t.Q6J("formGroup",s.signUpService.registrationForm),t.xp6(1),t.Q6J("control",s.signUpService.registrationForm.get("name"))("isRequired",!0)("backendError",t.lcZ(2,12,s.backendError$)),t.xp6(2),t.Q6J("control",s.signUpService.registrationForm.get("email"))("isRequired",!0)("backendError",t.lcZ(4,14,s.backendError$)),t.xp6(2),t.Q6J("control",s.signUpService.registrationForm.get("password"))("isRequired",!0)("backendError",t.lcZ(6,16,s.backendError$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(8,18,s.backendError$)),t.xp6(3),t.Q6J("disabled",s.signUpService.registrationForm.invalid||!!t.lcZ(11,20,s.isSubmitting$)||!!t.lcZ(12,22,s.isSubmitFormButtonDisable$)))},dependencies:[p.O5,h.rH,a._Y,a.JL,a.sg,P.A,L.r,p.Ov],styles:[".btn__container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;flex-direction:column;align-items:flex-end}.btn__container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:10px}.btn__container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.error[_ngcontent-%COMP%]{color:#d60000;margin-top:10px}"],changeDetection:0})}return n})(),q=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#n=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-registration-page"]],decls:7,vars:0,consts:[[1,"container","auth"],[1,"auth__form"]],template:function(i,s){1&i&&(t.TgZ(0,"h1"),t._uU(1,"Connections"),t.qZA(),t.TgZ(2,"section",0)(3,"div",1)(4,"h2"),t._uU(5,"Sign up"),t.qZA(),t._UZ(6,"app-registartion-form"),t.qZA()())},dependencies:[H],styles:["h1[_ngcontent-%COMP%]{text-align:center;margin-top:80px;color:#d27091}.auth[_ngcontent-%COMP%]{max-width:500px;width:100%;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.auth[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px}.auth__form[_ngcontent-%COMP%]{border:1px solid rgb(68,75,101);padding:30px;border-radius:8px}"],changeDetection:0})}return n})();const F=(0,e.PH)("[Auth] Sign In",(0,e.Ky)()),x=(0,e.PH)("[Auth] Sign In Success",(0,e.Ky)()),M=(0,e.PH)("[Auth] Sign In Failure",(0,e.Ky)()),O=(0,e.PH)("[Auth] Sign In Reset"),y=(0,e.ZF)(f.A.SignIn),z=(0,e.P1)(y,n=>n.isSubmitting),X=(0,e.P1)(y,n=>n.validationsError);(0,e.P1)(y,n=>n.email);let B=(()=>{class n{constructor(r,i){this.fb=r,this.store=i,this.isSubmitting$=this.store.pipe((0,e.Ys)(z)),this.backendError$=this.store.pipe((0,e.Ys)(X)),this.isSubmitFormButtonDisable$=new I.X(!1),this.subscriptions=[],this.loginForm=this.fb.group({email:["",[a.kI.required,a.kI.email]],password:["",[a.kI.required]]})}resetSignIn(){this.loginForm.reset(),this.store.dispatch(O())}initFormValueChanges(){const r=this.loginForm.valueChanges.subscribe(()=>{this.isSubmitFormButtonDisable$.next(!1)});this.subscriptions.push(r)}onSubmit(){this.store.dispatch(F({userData:this.loginForm.value}));const i=this.backendError$.subscribe(s=>{"NotFoundException"===s?.type&&this.isSubmitFormButtonDisable$.next(!0)});this.subscriptions.push(i)}static#t=this.\u0275fac=function(i){return new(i||n)(t.LFG(a.qu),t.LFG(e.yh))};static#n=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac})}return n})();function j(n,c){if(1&n&&(t.TgZ(0,"div",7),t._uU(1),t.ALo(2,"async"),t.qZA()),2&n){const r=t.oxw();let i;t.xp6(1),t.hij(" ",null==(i=t.lcZ(2,1,r.backendError$))?null:i.message," ")}}let K=(()=>{class n{constructor(r){this.signInService=r,this.isSubmitting$=this.signInService.isSubmitting$,this.backendError$=this.signInService.backendError$,this.isSubmitFormButtonDisable$=this.signInService.isSubmitFormButtonDisable$}ngOnInit(){this.signInService.resetSignIn(),this.signInService.initFormValueChanges()}ngOnDestroy(){this.signInService.subscriptions.forEach(r=>r.unsubscribe())}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(B))};static#n=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-login-form"]],decls:14,vars:19,consts:[[1,"form",3,"formGroup","ngSubmit"],["label","Email","controlName","email","type","email",3,"control","isRequired","backendError"],["label","Password","controlName","password","type","password",3,"control","isRequired","backendError"],["class","error",4,"ngIf"],[1,"btn__container"],["type","submit","customClass","auth__btn","title","submit",3,"disabled"],["routerLink","/auth/signup"],[1,"error"]],template:function(i,s){1&i&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return s.signInService.onSubmit()}),t._UZ(1,"app-form-control",1),t.ALo(2,"async"),t._UZ(3,"app-form-control",2),t.ALo(4,"async"),t.YNc(5,j,3,3,"div",3),t.ALo(6,"async"),t.TgZ(7,"div",4)(8,"app-button",5),t.ALo(9,"async"),t.ALo(10,"async"),t._uU(11," Sign in "),t.qZA(),t.TgZ(12,"a",6),t._uU(13," Dont have an account? Sign Up "),t.qZA()()()),2&i&&(t.Q6J("formGroup",s.signInService.loginForm),t.xp6(1),t.Q6J("control",s.signInService.loginForm.get("email"))("isRequired",!0)("backendError",t.lcZ(2,9,s.backendError$)),t.xp6(2),t.Q6J("control",s.signInService.loginForm.get("password"))("isRequired",!0)("backendError",t.lcZ(4,11,s.backendError$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(6,13,s.backendError$)),t.xp6(3),t.Q6J("disabled",s.signInService.loginForm.invalid||!!t.lcZ(9,15,s.isSubmitting$)||!!t.lcZ(10,17,s.isSubmitFormButtonDisable$)))},dependencies:[p.O5,h.rH,a._Y,a.JL,a.sg,P.A,L.r,p.Ov],styles:[".btn__container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;flex-direction:column;align-items:flex-end}.btn__container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:10px}.btn__container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.error[_ngcontent-%COMP%]{color:#d60000;margin-top:10px}"],changeDetection:0})}return n})();const W=[{path:b.Nk,component:q},{path:b.Zd,component:(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#n=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-login-page"]],decls:7,vars:0,consts:[[1,"container","auth"],[1,"auth__form"]],template:function(i,s){1&i&&(t.TgZ(0,"h1"),t._uU(1,"Connections"),t.qZA(),t.TgZ(2,"section",0)(3,"div",1)(4,"h2"),t._uU(5,"Sign up"),t.qZA(),t._UZ(6,"app-login-form"),t.qZA()())},dependencies:[K],styles:["h1[_ngcontent-%COMP%]{text-align:center;margin-top:80px;color:#d27091}.auth[_ngcontent-%COMP%]{max-width:500px;width:100%;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.auth[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px}.auth__form[_ngcontent-%COMP%]{border:1px solid rgb(68,75,101);padding:30px;border-radius:8px}"],changeDetection:0})}return n})()}];let tt=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#n=this.\u0275mod=t.oAB({type:n});static#i=this.\u0275inj=t.cJS({imports:[h.Bz.forChild(W),h.Bz]})}return n})();var g=o(7483);const it=(0,e.Lq)({isSubmitting:!1,validationsError:null,email:""},(0,e.on)(S,(n,c)=>({...n,isSubmitting:!0,validationsError:null,email:c.userData.email})),(0,e.on)(Z,n=>({...n,isSubmitting:!1})),(0,e.on)(E,(n,c)=>({...n,isSubmitting:!1,validationsError:c.error})),(0,e.on)(C,n=>({...n,isSubmitting:!1,validationsError:null}))),rt=(n,c)=>it(n,c);var R=o(9862),D=o(553);let A=(()=>{class n{constructor(r){this.http=new R.eN(r)}signUp(r){return this.http.post(`${D.N.apiUrl}registration`,r)}signIn(r){return this.http.post(`${D.N.apiUrl}login`,r)}static#t=this.\u0275fac=function(i){return new(i||n)(t.LFG(R.jN))};static#n=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac})}return n})();var T=o(4664),G=o(7398),J=o(6306),Y=o(2096),N=o(3625);let et=(()=>{class n{constructor(r,i,s,d){this.actions$=r,this.authApi=i,this.router=s,this.snackBar=d,this.register$=(0,g.GW)(()=>this.actions$.pipe((0,g.l4)(S),(0,T.w)(({userData:m})=>this.authApi.signUp(m).pipe((0,G.U)(()=>(this.snackBar.addMessage("You`ve been succesfully registered","snackbar-success"),this.router.navigateByUrl(`/${b.UY}/${b.Zd}`),Z())),(0,J.K)(u=>{const l=u.error;return this.snackBar.addMessage(l?l.message:u.message,"snackbar-error"),(0,Y.of)(E({error:u.error}))})))))}static#t=this.\u0275fac=function(i){return new(i||n)(t.LFG(g.eX),t.LFG(A),t.LFG(h.F0),t.LFG(N.c))};static#n=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac})}return n})();const ot=(0,e.Lq)({isSubmitting:!1,validationsError:null,email:"",token:null,uid:null},(0,e.on)(F,(n,c)=>({...n,isSubmitting:!0,validationsError:null,email:c.userData.email})),(0,e.on)(x,(n,{userData:c,token:r,uid:i})=>({...n,isSubmitting:!1,token:r,uid:i,email:c.email})),(0,e.on)(M,(n,c)=>({...n,isSubmitting:!1,validationsError:c.error})),(0,e.on)(O,n=>({...n,isSubmitting:!1,validationsError:null}))),at=(n,c)=>ot(n,c);var ct=o(304);let ut=(()=>{class n{constructor(r,i,s,d){this.actions$=r,this.authApi=i,this.snackBar=s,this.auth=d,this.login$=(0,g.GW)(()=>this.actions$.pipe((0,g.l4)(F),(0,T.w)(({userData:m})=>this.authApi.signIn(m).pipe((0,G.U)(({token:u,uid:l})=>(this.snackBar.addMessage(`Welcome ${m.email}`,"snackbar-success"),this.auth.handleSignIn({email:m.email,token:u,uid:l}),x({userData:m,token:u,uid:l}))),(0,J.K)(u=>{const l=u.error;return this.snackBar.addMessage(l?l.message:u.message,"snackbar-error"),(0,Y.of)(M({error:u.error}))})))))}static#t=this.\u0275fac=function(i){return new(i||n)(t.LFG(g.eX),t.LFG(A),t.LFG(N.c),t.LFG(ct.e))};static#n=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac})}return n})();var lt=o(6208),gt=o(6889);let mt=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#n=this.\u0275mod=t.oAB({type:n});static#i=this.\u0275inj=t.cJS({providers:[A,k,B],imports:[p.ez,tt,a.UX,lt.m,gt.q,e.Aw.forFeature(f.A.SignUp,rt),e.Aw.forFeature(f.A.SignIn,at),g.sQ.forFeature([et,ut])]})}return n})()}}]);
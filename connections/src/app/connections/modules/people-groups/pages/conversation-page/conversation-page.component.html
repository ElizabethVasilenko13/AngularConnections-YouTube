<section class="group-dialog">
  <div class="group-dialog__header">
    <div class="content">
      <div class="header__title">
        <a routerLink="/" class="header__control" title="Go to main page">
          <mat-icon>keyboard_arrow_left</mat-icon>
        </a>
        <h2>{{ 'Conversation' | uppercase }}</h2>
      </div>
      <div class="header__controls">
        <button
          (click)="conversationPageService.updateConversation(converastionID, conversationData$)"
          class="group__btn"
          [disabled]="
            !countdownService.isCountdownEnded(
              'conversation' + converastionID
            ) || (isConversationsLoading$ | async)
          "
        >
          {{ 'Update messages' | uppercase }}
        </button>
        <button
          (click)="usersService.onDeleteConversation(converastionID)"
          *ngIf="(isConversationsLoading$ | async) === false"
          class="header__control header__control-delete"
          [disabled]="isConversationsLoading$ | async"
          title="Delete group"
        >
          <mat-icon>delete</mat-icon>
        </button>
      </div>
    </div>
    <div
      class="user__message"
      *ngIf="
        !countdownService.isCountdownEnded('conversation' + converastionID)
      "
    >
      {{
        'Please wait ' +
          countdownService.getCountdownValue('conversation' + converastionID) +
          ' seconds, until update button will become enabled'
      }}
    </div>
  </div>
  <app-loader [isLoading]="isConversationsLoading$ | async"></app-loader>
  <div class="group-dialog__main">
    <app-messages-list [messages]="(conversationData$ | async)?.messages"></app-messages-list>
    <app-post-message-form
        [formGroup]="messagesService.createMessageForm"
        [isLoading$]="isConversationsLoading$"
        (sendMessage)="messagesService.sendMessageForConversation(this.converastionID, conversationData$)">
    </app-post-message-form>
  </div>
</section>
